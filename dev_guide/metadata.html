
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Metadata &#8212; Intel® DL Streamer  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/doxyrest-pygments.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script src="../_static/target-highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model Preparation" href="model_preparation.html" />
    <link rel="prev" title="Developer Guide" href="dev_guide_index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Intel® DL Streamer  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../get_started/get_started_index.html">
   Get Started
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../get_started/hardware_requirements.html">
     Hardware Requirements
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../get_started/install/install_guide_index.html">
     Install Guide
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../get_started/install/install_guide_ubuntu.html">
       Install Guide Ubuntu
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../get_started/install/install_guide_rhel.html">
       Install Guide RHEL
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../get_started/install/install_guide_windows.html">
       Install Guide Windows (Preview)
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../get_started/tutorial.html">
     Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://github.com/dlstreamer/dlstreamer/blob/master/samples/README.md">
     Samples
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="dev_guide_index.html">
   Developer Guide
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Metadata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model_preparation.html">
     Model Preparation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="model_proc_file.html">
     Model-proc File
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="how_to_create_model_proc_file.html">
     How to Create Model-proc File
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="python_bindings.html">
     Python Bindings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="custom_processing.html">
     Custom Processing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="object_tracking.html">
     Object Tracking
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="converting_deepstream_to_dlstreamer.html">
     Converting NVIDIA DeepStream Pipelines to Intel® Deep Learning Streamer (Intel® DL Streamer) Pipeline Framework
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="how_to_contribute.html">
     How to Contribute
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="coding_style.html">
       Coding Style
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="preview_features/preview_features.html">
     Preview Features
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="preview_features/action_recognition.html">
       Action Recognition
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="preview_features/segmentation.html">
       Segmentation
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../elements/elements.html">
   Elements
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvainference.html">
     gvainference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvadetect.html">
     gvadetect
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvaclassify.html">
     gvaclassify
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvatrack.html">
     gvatrack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvametaconvert.html">
     gvametaconvert
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvametapublish.html">
     gvametapublish
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvametaaggregate.html">
     gvametaaggregate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvaaudiodetect.html">
     gvaaudiodetect
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvafpscounter.html">
     gvafpscounter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvapython.html">
     gvapython
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../elements/gvawatermark.html">
     gvawatermark
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../supported_models.html">
   Supported Models
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../api_ref/api_reference.html">
   API Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../api_ref/page_index.html">
     Intel® Deep Learning Streamer (Intel® DL Streamer) API reference
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../api_ref/global.html">
     Global Namespace
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api_ref/namespace_GVA.html">
       namespace GVA
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/struct_GVA_Rect.html">
         template struct GVA::Rect
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/struct_GVA_Segment.html">
         template struct GVA::Segment
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/class_GVA_AudioEvent.html">
         class GVA::AudioEvent
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/class_GVA_AudioFrame.html">
         class GVA::AudioFrame
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/class_GVA_RegionOfInterest.html">
         class GVA::RegionOfInterest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/class_GVA_Tensor.html">
         class GVA::Tensor
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/class_GVA_VideoFrame.html">
         class GVA::VideoFrame
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api_ref/namespace_gstgva.html">
       namespace gstgva
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/namespace_gstgva_region_of_interest.html">
         namespace gstgva::region_of_interest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/namespace_gstgva_tensor.html">
         namespace gstgva::tensor
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../api_ref/namespace_gstgva_video_frame.html">
         namespace gstgva::video_frame
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api_ref/enum_GVALayout.html">
       enum GVALayout
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../api_ref/enum_GVAPrecision.html">
       enum GVAPrecision
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api_ref/struct_GstGVAAudioEventMeta.html">
       struct GstGVAAudioEventMeta
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="simple">
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api_ref/struct__GstGVAJSONMeta.html">
       struct _GstGVAJSONMeta
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
      <label for="toctree-checkbox-12">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="simple">
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../api_ref/struct__GstGVATensorMeta.html">
       struct _GstGVATensorMeta
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
      <label for="toctree-checkbox-13">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="simple">
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/dev_guide/metadata.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Metadata</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="metadata">
<h1>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">#</a></h1>
<p>Inference plugins utilize standard GStreamer metadata <a class="reference external" href="https://gstreamer.freedesktop.org/documentation/video/gstvideometa.html?gi-language=c#GstVideoRegionOfInterestMeta">GstVideoRegionOfInterestMeta</a>
for object detection and classification use cases (elements <strong>gvadetect</strong>, <strong>gvaclassify</strong>), and define two custom metadata types</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/dlstreamer/dlstreamer/blob/master/gst-libs/gst/videoanalytics/metadata/gva_tensor_meta.h">GstGVATensorMeta</a> for output of <strong>gvainference</strong> element performing generic inference
on any model with image-compatible input layer and any format of output layer(s)</p></li>
<li><p><a class="reference external" href="https://github.com/dlstreamer/dlstreamer/blob/master/gst-libs/gst/videoanalytics/metadata/gva_json_meta.h">GstGVAJSONMeta</a> for output of <strong>gvametaconvert</strong> element performing
conversion of <strong>GstVideoRegionOfInterestMeta</strong> into JSON format</p></li>
</ul>
<p>The <strong>gvadetect</strong> element supports only object detection models and
checks that the model output layer has a known format convertible into a bounding
boxes list. The gvadetect element creates and attaches to output
GstBuffer as many instances of GstVideoRegionOfInterestMeta as objects
detected on the frame. The object bounding-box position and object label are
stored directly in GstVideoRegionOfInterestMeta fields
<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">roi_type</span></code>, while additional detection information such
as confidence (in range [0,1]), model name, and output layer name are stored
as GstStructure object and added into <code class="docutils literal notranslate"><span class="pre">GList</span> <span class="pre">*params</span></code> list of the same
GstVideoRegionOfInterestMeta.</p>
<p>The <strong>gvaclassify</strong> element is typically inserted into the pipeline after
gvadetect and executes inference on all objects detected by gvadetect
(i.e., as many times as GstVideoRegionOfInterestMeta attached to input
buffer) with input on crop area specified by GstVideoRegionOfInterestMeta.
The inference output is converted into as
many GstStructure objects as the number of output layers in the model and
added into the <code class="docutils literal notranslate"><span class="pre">GList</span> <span class="pre">*params</span></code> list of the GstVideoRegionOfInterestMeta.
Each GstStructure contains full inference results such as tensor data
and dimensions, model and layer names, and label in string format (if
post-processing rules are specified).</p>
<p>The <strong>gvainference</strong> element generates and attaches to the frame custom
metadata <strong>GstGVATensorMeta</strong> (as many instances as output layers in the
model) containing tensor raw data and additional information such as
tensor dimensions, data precision, etc.</p>
<p>Using the following pipeline as an example</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">MODEL1</span><span class="o">=</span>face-detection-adas-0001
<span class="nv">MODEL2</span><span class="o">=</span>age-gender-recognition-retail-0013
<span class="nv">MODEL3</span><span class="o">=</span>emotions-recognition-retail-0003

gst-launch-1.0 --gst-plugin-path <span class="si">${</span><span class="nv">GST_PLUGIN_PATH</span><span class="si">}</span> <span class="se">\</span>
    filesrc <span class="nv">location</span><span class="o">=</span><span class="si">${</span><span class="nv">INPUT</span><span class="si">}</span> ! decodebin ! video/x-raw ! videoconvert ! <span class="se">\</span>
    gvadetect   <span class="nv">model</span><span class="o">=</span><span class="k">$(</span>MODEL_PATH <span class="nv">$MODEL1</span><span class="k">)</span> ! queue ! <span class="se">\</span>
    gvaclassify <span class="nv">model</span><span class="o">=</span><span class="k">$(</span>MODEL_PATH <span class="nv">$MODEL2</span><span class="k">)</span> model-proc<span class="o">=</span><span class="k">$(</span>PROC_PATH <span class="nv">$MODEL2</span><span class="k">)</span> ! queue ! <span class="se">\</span>
    gvaclassify <span class="nv">model</span><span class="o">=</span><span class="k">$(</span>MODEL_PATH <span class="nv">$MODEL3</span><span class="k">)</span> model-proc<span class="o">=</span><span class="k">$(</span>PROC_PATH <span class="nv">$MODEL3</span><span class="k">)</span> ! queue ! <span class="se">\</span>
    gvawatermark ! videoconvert ! fpsdisplaysink <span class="nv">sync</span><span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
<p>If the gvadetect element detected three faces, it will attach three metadata
objects each containing one GstStructure with detection results, then
gvaclassify will add two more GstStructure (model contains two output
layers, age, and gender) into each meta, and another gvaclassify will add
one more GstStructure (emotion), resulting in three metadata objects
each containing four GstStructure in <code class="docutils literal notranslate"><span class="pre">GList</span> <span class="pre">*params</span></code> field: detection,
age, gender, emotions.</p>
<p>“C” application can iterate objects and inference results using
GStreamer API similar to the code snippet below</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gst/video/video.h&gt;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">print_meta</span><span class="p">(</span><span class="n">GstBuffer</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">gpointer</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">GstMeta</span><span class="w"> </span><span class="o">*</span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gst_buffer_iterate_meta</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">state</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">meta</span><span class="o">-&gt;</span><span class="n">info</span><span class="o">-&gt;</span><span class="n">api</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">GST_VIDEO_REGION_OF_INTEREST_META_API_TYPE</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">GstVideoRegionOfInterestMeta</span><span class="w"> </span><span class="o">*</span><span class="n">roi_meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">GstVideoRegionOfInterestMeta</span><span class="o">*</span><span class="p">)</span><span class="n">meta</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Object bounding box %d,%d,%d,%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">roi_meta</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">roi_meta</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">roi_meta</span><span class="o">-&gt;</span><span class="n">w</span><span class="p">,</span><span class="w"> </span><span class="n">roi_meta</span><span class="o">-&gt;</span><span class="n">h</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">GList</span><span class="w"> </span><span class="o">*</span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roi_meta</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">;</span><span class="w"> </span><span class="n">l</span><span class="p">;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_list_next</span><span class="p">(</span><span class="n">l</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">GstStructure</span><span class="w"> </span><span class="o">*</span><span class="n">structure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">GstStructure</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">l</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Attribute %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">gst_structure_get_name</span><span class="p">(</span><span class="n">structure</span><span class="p">));</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gst_structure_has_field</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;label&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;    label=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">gst_structure_get_string</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;label&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gst_structure_has_field</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;confidence&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">confidence</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">gst_structure_get_double</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;confidence&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">confidence</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;    confidence=%.2f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">confidence</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>C++ application can access metadata much simpler utilizing C++ interface</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gst/videoanalytics/video_frame.h&quot;</span><span class="cp"></span>

<span class="kt">void</span><span class="w"> </span><span class="nf">PrintMeta</span><span class="p">(</span><span class="n">GstBuffer</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">GVA</span><span class="o">::</span><span class="n">VideoFrame</span><span class="w"> </span><span class="n">video_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">GVA</span><span class="o">::</span><span class="n">RegionOfInterest</span><span class="w"> </span><span class="o">&amp;</span><span class="n">roi</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">video_frame</span><span class="p">.</span><span class="n">regions</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">rect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roi</span><span class="p">.</span><span class="n">rect</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Object bounding box &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">w</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">h</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">GVA</span><span class="o">::</span><span class="n">Tensor</span><span class="w"> </span><span class="o">&amp;</span><span class="n">tensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">roi</span><span class="p">.</span><span class="n">tensors</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;  Attribute &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">tensor</span><span class="p">.</span><span class="n">name</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    label=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">tensor</span><span class="p">.</span><span class="n">label</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;    model=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">tensor</span><span class="p">.</span><span class="n">model_name</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The following table summarizes the input and output of various elements</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>GStreamer element</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>INPUT</p></th>
<th class="head"><p>OUTPUT</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gvainference</p></td>
<td><p>Generic inference</p></td>
<td><div class="line-block">
<div class="line">GstBuffer</div>
<div class="line"><em>or</em></div>
<div class="line">GstBuffer + GstVideoRegionOfInterestMeta</div>
</div>
</td>
<td><div class="line-block">
<div class="line">INPUT + GvaTensorMeta</div>
<div class="line"><em>or</em></div>
<div class="line">INPUT + extended GstVideoRegionOfInterestMeta</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>gvadetect</p></td>
<td><p>Object detection</p></td>
<td><div class="line-block">
<div class="line">GstBuffer</div>
<div class="line"><em>or</em></div>
<div class="line">GstBuffer + GstVideoRegionOfInterestMeta</div>
</div>
</td>
<td><p>INPUT + GstVideoRegionOfInterestMeta</p></td>
</tr>
<tr class="row-even"><td><p>gvaclassify</p></td>
<td><p>Object classification</p></td>
<td><div class="line-block">
<div class="line">GstBuffer</div>
<div class="line"><em>or</em></div>
<div class="line">GstBuffer + GstVideoRegionOfInterestMeta</div>
</div>
</td>
<td><div class="line-block">
<div class="line">INPUT + GvaTensorMeta</div>
<div class="line"><em>or</em></div>
<div class="line">INPUT + extended GstVideoRegionOfInterestMeta</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>gvatrack</p></td>
<td><p>Object tracking</p></td>
<td><div class="line-block">
<div class="line">GstBuffer</div>
<div class="line">[ + GstVideoRegionOfInterestMeta]</div>
</div>
</td>
<td><p>INPUT + GstVideoRegionOfInterestMeta</p></td>
</tr>
<tr class="row-even"><td><p>gvaaudiodetect</p></td>
<td><p>Audio event detection</p></td>
<td><p>GstBuffer</p></td>
<td><p>INPUT + GstGVAAudioEventMeta</p></td>
</tr>
<tr class="row-odd"><td><p>gvametaconvert</p></td>
<td><p>Metadata conversion</p></td>
<td><p>GstBuffer + GstVideoRegionOfInterestMeta, GvaTensorMeta</p></td>
<td><p>INPUT + GstGVAJSONMeta</p></td>
</tr>
<tr class="row-even"><td><p>gvametapublish</p></td>
<td><p>Metadata publishing to Kafka or MQTT</p></td>
<td><p>GstBuffer + GstGVAJSONMeta</p></td>
<td><p>INPUT</p></td>
</tr>
<tr class="row-odd"><td><p>gvametaaggregate</p></td>
<td><p>Metadata aggregating</p></td>
<td><p>[GstBuffer + GstVideoRegionOfInterestMeta]</p></td>
<td><p>INPUT + extended GstVideoRegionOfInterestMeta</p></td>
</tr>
<tr class="row-even"><td><p>gvawatermark</p></td>
<td><p>Overlay</p></td>
<td><p>GstBuffer + GstVideoRegionOfInterestMeta, GvaTensorMeta</p></td>
<td><p>GstBuffer with modified image</p></td>
</tr>
</tbody>
</table>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="dev_guide_index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Developer Guide</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="model_preparation.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Model Preparation</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Intel Corporation<br/>
  
      &copy; Copyright 2022, Intel Corporation.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>